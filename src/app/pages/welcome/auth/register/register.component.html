<div class="register-container">
  <app-header [addBackground]="true"></app-header>

  <form [formGroup]="registerForm" (ngSubmit)="register()">
    <div class="left-form form-part">
      <p>
        Gracias por adquirir nuestros servicios.
        A continuación puedes registrar los datos de la
        cuenta.
      </p>

      <app-custom-input
        label="Nombres"
        label_s="color: var(--ion-color-dark)"
        [control]="first_name"
        [errorMessage]="errorMessages.first_name">
      </app-custom-input>
      <p class="error-text" *ngIf="getErrorMessage('first_name')">
        {{ getErrorMessage('first_name') }}
      </p>

      <app-custom-input
        label="Apellidos"
        label_s="color: var(--ion-color-dark)"
        [control]="last_name"
        [errorMessage]="errorMessages.last_name">
      </app-custom-input>

      <div>
        <label>Identificación</label>
        <div class="id-div">
          <app-custom-input
            type="select"
            [options]="identificacionOptions"
            [control]="identification_type">
          </app-custom-input>

          <app-custom-input
            [control]="identification_number"
            [errorMessage]="errorMessages.identification_number">
          </app-custom-input>
        </div>
      </div>

      <app-custom-input
        label="Genero"
        label_s="color: var(--ion-color-dark)"
        type="select"
        [options]="generoOptions"
        [control]="gender"
        [errorMessage]="errorMessages.gender">
      </app-custom-input>

      <app-custom-input
        label="Fecha de nacimiento"
        label_s="color: var(--ion-color-dark)"
        type="date"
        [control]="birth_date"
        [errorMessage]="errorMessages.birth_date">
      </app-custom-input>

    </div>

    <div class="right-form form-part">
      <div class="image-upload-container">
        <div class="image-circle" (click)="selectImage()">
          <img
            *ngIf="selectedImage"
            [src]="registerForm.get('base_64')?.value"
            alt="User Image"
          />
          <div *ngIf="!selectedImage" class="upload-icon"></div>
          <div class="small-circle">
            <ion-icon class="camera-icon" name="camera"></ion-icon>
          </div>
        </div>
        <input
          type="file"
          id="imageInput"
          (change)="onImageSelected($event)"
          hidden
          accept="image/*"
        />
      </div>

      <app-custom-input
        label="Departamento"
        label_s="color: var(--ion-color-dark)"
        type="select"
        [options]="departmentsOptions"
        [control]="department"
        [errorMessage]="errorMessages.department">
      </app-custom-input>

      <app-custom-input
        label="Ciudad"
        label_s="color: var(--ion-color-dark)"
        type="select"
        [options]="citiesOptions"
        [control]="city"
        [errorMessage]="errorMessages.city">
      </app-custom-input>

      <app-custom-input
        label="Dirección"
        label_s="color: var(--ion-color-dark)"
        [control]="address"
        [errorMessage]="errorMessages.address">
      </app-custom-input>

      <app-custom-input
        label="Teléfono"
        label_s="color: var(--ion-color-dark)"
        [control]="phone"
        [errorMessage]="errorMessages.phone">
      </app-custom-input>

      <app-custom-input
        label="Email"
        label_s="color: var(--ion-color-dark)"
        type="email"
        [control]="email"
        [errorMessage]="errorMessages.email">
      </app-custom-input>

      <app-custom-input
        label="Contraseña"
        label_s="color: var(--ion-color-dark)"
        type="password"
        [control]="password"
        [errorMessage]="errorMessages.password">
      </app-custom-input>

      <app-custom-input
        label="Confirma la contraseña"
        label_s="color: var(--ion-color-dark)"
        type="password"
        [control]="confirmPassword"
        [errorMessage]="errorMessages.confirmPassword">
      </app-custom-input>

      <div class="custom-checkbox">
        <input
          id="privacy_policy"
          type="checkbox"
          formControlName="privacy_policy"
          required
        />
        <label for="privacy_policy" class="checkbox-label">
          <span class="checkmark"></span>
          Acepto las
          <a href="/privacy-policy" target="_blank">políticas de privacidad</a> y el
          tratamiento de datos.
        </label>
      </div>

      <button class="register-button" type="submit" [disabled]="registerForm.invalid">
        Registrar
      </button>
    </div>
  </form>
</div>
